# P3394 Agent Configuration
# This file configures your P3394-compliant agent.
# Environment variables can be used: ${VAR_NAME} or ${VAR_NAME:-default}

agent:
  id: "p3394-exemplar"
  name: "P3394 Exemplar Agent"
  version: "0.2.0"
  description: "Reference implementation of the IEEE P3394 Agent Interface Standard"

# Channel configuration
# All channels are enabled by default when running as daemon
channels:
  # CLI channel - interactive terminal (default for client mode)
  cli:
    enabled: true
    default: true  # Used when no channel specified

  # Unified web server - all HTTP channels on single port with different routes
  # Routes:
  #   /          - Web chat UI (landing, chat page)
  #   /api/      - Web chat API endpoints
  #   /v1/       - Anthropic API compatible endpoints (for Cherry Studio, Cursor)
  #   /p3394/    - P3394 native protocol endpoints
  web:
    enabled: true
    host: "0.0.0.0"
    port: 8000
    routes:
      chat: "/"              # Web chat UI at root
      anthropic_api: "/v1"   # Anthropic API at /v1/messages
      p3394: "/p3394"        # P3394 protocol at /p3394/manifest, /p3394/messages

  # Anthropic API settings (mounted at /v1 on web server)
  anthropic_api:
    enabled: true
    # API keys for authentication (empty = no auth for testing)
    api_keys: []

  # P3394 native protocol settings (mounted at /p3394 on web server)
  p3394:
    enabled: true

  # WhatsApp channel (requires additional setup)
  whatsapp:
    enabled: false
    service_phone: "${WHATSAPP_SERVICE_PHONE:-+12017575100}"
    gateway_url: "${GATEWAY_URL:-http://localhost:8000/api/umf}"

# Skills to load
skills:
  - name: "echo"
    enabled: true
  - name: "help"
    enabled: true
  - name: "site-generator"
    enabled: true
  - name: "p3394-explainer"
    enabled: true

# LLM configuration
llm:
  provider: "anthropic"
  model: "claude-sonnet-4-20250514"
  max_tokens: 4096
  temperature: 0.7
  # System prompt with agent identity placeholders
  system_prompt: |
    You are {agent_name} (v{agent_version}).

    {agent_description}

    Your role:
    - Demonstrate P3394 Universal Message Format (UMF) in action
    - Help users understand and implement the P3394 standard
    - Provide examples of agent-to-agent communication
    - Show best practices for channel adapters and content negotiation

    When responding:
    1. Structure all outputs as valid P3394 messages internally
    2. Explain P3394 concepts clearly when asked
    3. Demonstrate capabilities rather than just describing them
    4. Be helpful, accurate, and concise

# Session configuration
sessions:
  # Concurrency mode for multi-channel access to same session
  #   "collaborative" - Any channel can read/write anytime (Claude/ChatGPT style)
  #   "primary_binding" - One primary channel per session, others observe
  mode: "collaborative"

  # Settings for "primary_binding" mode (ignored in collaborative mode)
  primary_binding:
    allow_observers: true           # Let non-primary channels connect as read-only
    allow_channel_switching: true   # Allow /claimSession to take over
    require_handoff_ack: false      # Require current primary to acknowledge handoff

  # Session expiration
  default_ttl_hours: 24             # Sessions expire after this many hours
  cleanup_interval_minutes: 60      # How often to clean up expired sessions

# Storage configuration
storage:
  type: "sqlite"
  path: "./data/agent.db"

# Metadata (optional, for custom extensions)
metadata:
  standard: "IEEE P3394"
  repository: "https://github.com/neolaf2/ieee3394-exemplar-agent"
